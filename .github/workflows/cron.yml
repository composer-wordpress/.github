name: Cron

on:
  workflow_dispatch:
  schedule:
    - cron: '0 */12 * * *'

jobs:
  test:
    name: ${{ matrix.release-type }}
    runs-on: ubuntu-latest
    strategy:
      matrix:
        release-type:
          - full
          - new-bundled
          - no-content

    steps:
    - uses: actions/checkout@v2

    - name: Cache
      id: composer-cache
      uses: actions/cache@v2
      with:
        path: cache
        key: ${{ runner.os }}-php
        restore-keys: |
          ${{ runner.os }}-php

    - name: Update
      run: php ./bin/build.php
      env:
        RELEASE_TYPE: ${{ matrix.release-type }}
        TOKEN: ${{ secrets.TOKEN }}
        ACTOR: ${{ secrets.ACTOR }}
        REPO_SLUG: ${{ secrets.REPO_SLUG }}
